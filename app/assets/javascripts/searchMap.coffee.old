#$(document).ready ->
@commentOut ->
    # highlights filter thumbnail border on hover

    # determines click behavior for browse filter thumbnails
    $(".searchFilterThumbnail").click ->
      # highlights selected thumb
      myThumbnail = $(this)
      if $(this).attr("style") is "border: 2px solid #65b045; background:#d5eacb;"
        $(this).removeAttr "style"
      else
        $(".searchFilterThumbnail").removeAttr "style"
        $(this).attr "style", "border: 2px solid #65b045; background:#d5eacb;"


      # gets filter data
      filterId = $(this).data('tribe-id')
      # applies filter using jQuery to show or hide results
      $(".searchResult").hide() # hide all the results
      if filterId is 0 # if the filter is all campsites
        $(".searchResult").show() # then show all
      else
        $(".searchResult").each -> # for each campsite result
          targetResult = $(this)
          tribeIds = targetResult.data("tribes") # gets tribe ids for the campsite
          for x of tribeIds
            targetResult.show() if tribeIds[x] is filterId
          return

      return

    return

#$(document).ready ->
  #campsites = gon.campsites

  #$('.searchFilterThumbnail').click ->
    #filterId = $(this).data('tribe-id')

    # Recreates map's markerlayer based on tribe filter
    @filterMarkers = (tribeId, map) ->
      filteredGeoJson = new Object()
      if tribeId is 0
        filteredGeoJson = gon.geoJson
      else
        for object of gon.geoJson
          for tribe of gon.geoJson[object].properties.tribes
            #alert geoJson[object].properties.title if geoJson[object].properties.tribes[tribe] is filterId
            filteredGeoJson[object] = gon.geoJson[object] if gon.geoJson[object].properties.tribes[tribe] is tribeId
          return
        return
        for object of filteredGeoJson
          alert filteredGeoJson[object].properties.title
        return
      return
      #currentMarkerLayer.clearLayers()
      L.mapbox.map.markerLayer.clearLayers()
      L.mapbox.map.markerLayer.setGeoJSON(filteredGeoJson)
      #map.markerLayer.setGeoJSON(filteredGeoJson)
      #makeSearchMap(center, zoom, filteredGeoJson)

    @resetSearchArea = ->
      alert 'hi'
      mapCenter = map.getCenter() # Gets the current center of the map as an Leaflet LatLng
      mapBounds = map.getBounds() # Gets the SW and NE corners of the map as a Leaflet LatLngBound
      southWest = map.getBounds().getSouthWest() # Returns the SW corner
      distanceInMeters = mapCenter.distanceTo(southWest) # Returns the distance in meters
      distanceInMiles = distanceInMeters * .000621371 # Calculates the distance in miles
      alert "Center:" + mapCenter + "SW:" + southWest + "Distance:" + distanceInMiles
      window.location.replace("http://localhost:3000/campsites/search/?utf8=âœ“&keywords="+mapCenter.lng+"%2C+"+mapCenter.lat)